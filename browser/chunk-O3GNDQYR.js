import{$a as I,Bb as V,Cb as G,E as b,Ga as l,Ib as A,Kb as N,Oa as f,Qb as z,Sb as L,X as a,_ as S,aa as y,c as _,db as M,fa as u,ha as c,ia as v,jc as D,mb as k,nb as O,oa as i,pa as n,qa as s,qb as w,sb as E,tb as h,ub as F,va as C,vb as R,wa as P,zb as T}from"./chunk-FG5NIKUL.js";var B=()=>["/phone"],j=()=>["/auth/sign-up"],q=()=>["/change"];function H(r,t){r&1&&(i(0,"div"),l(1,"El correo es obligatorio."),n())}function U(r,t){r&1&&(i(0,"div"),l(1,"Debe ser un correo v\xE1lido."),n())}function W(r,t){if(r&1&&(i(0,"div",18),u(1,H,2,0,"div",19)(2,U,2,0,"div",19),n()),r&2){let o,e,m=P();a(),c("ngIf",(o=m.form.get("email"))==null||o.errors==null?null:o.errors.required),a(),c("ngIf",(e=m.form.get("email"))==null||e.errors==null?null:e.errors.email)}}function J(r,t){r&1&&(i(0,"div"),l(1,"La contrase\xF1a es obligatoria."),n())}function K(r,t){if(r&1&&(i(0,"div",18),u(1,J,2,0,"div",19),n()),r&2){let o,e=P();a(),c("ngIf",(o=e.form.get("password"))==null||o.errors==null?null:o.errors.required)}}var x=class r{constructor(t){this.router=t}_formBuilder=b(A);_authService=b(D);auth=L();form=this._formBuilder.group({email:this._formBuilder.control("",[h.required,h.email]),password:this._formBuilder.control("",h.required)});captchaResuelto=!1;recaptchaVerifier;ngOnInit(){this.initRecaptcha()}initRecaptcha(){this.recaptchaVerifier&&this.recaptchaVerifier.clear(),this.recaptchaVerifier=new z(this.auth,"recaptcha-container",{size:"normal",callback:t=>{console.log("reCAPTCHA resuelto:",t),this.captchaResuelto=!0},"expired-callback":()=>{console.warn("reCAPTCHA expirado"),this.captchaResuelto=!1}}),this.recaptchaVerifier.render().then(t=>{console.log("reCAPTCHA renderizado con ID:",t)})}submit(){return _(this,null,function*(){if(this.form.invalid)return;let{email:t,password:o}=this.form.value;if(!t.trim()||!o.trim()){alert("Por favor, completa todos los campos.");return}if(!this.captchaResuelto){alert("Por favor, completa el reCAPTCHA.");return}try{yield this._authService.signIn({email:t,password:o}),this.router.navigate(["/home"])}catch(e){console.error(e),this.recaptchaVerifier.clear(),this.initRecaptcha(),this.captchaResuelto=!1,yield this._authService.incrementarIntentosPorEmail(t)}this.form.reset()})}conGoogle(){return _(this,null,function*(){try{let t=yield this._authService.signInWithGoogle();console.log("Usuario autenticado con Google:",t.user),this.router.navigate(["/home"])}catch(t){console.error("Error en autenticaci\xF3n con Google:",t)}})}static \u0275fac=function(o){return new(o||r)(S(k))};static \u0275cmp=y({type:r,selectors:[["app-sign-in"]],decls:29,vars:14,consts:[[1,"title"],["id","botoncitos"],[1,"google-btn",3,"click"],[1,"bx","bxl-google"],[1,"phone-btn",3,"routerLink"],[1,"bx","bx-phone"],["id","recaptcha-container"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","placeholder","tu@correo.com"],["class","error",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password","placeholder","********"],["type","submit",1,"submit-btn",3,"disabled"],[1,"links"],[3,"routerLink"],[1,"change-link",3,"routerLink"],[1,"error"],[4,"ngIf"]],template:function(o,e){if(o&1&&(i(0,"body")(1,"h1",0),l(2,"Inicia sesi\xF3n"),n(),i(3,"div",1)(4,"button",2),C("click",function(){return e.conGoogle()}),s(5,"i",3),l(6,` Inicia con Google
`),n(),i(7,"button",4),s(8,"i",5),l(9,` Tel\xE9fono
`),n()(),s(10,"div",6),i(11,"form",7),C("ngSubmit",function(){return e.submit()}),i(12,"div",8)(13,"label",9),l(14,"Correo electr\xF3nico:"),n(),s(15,"input",10),u(16,W,3,2,"div",11),n(),i(17,"div",8)(18,"label",12),l(19,"Contrase\xF1a:"),n(),s(20,"input",13),u(21,K,2,1,"div",11),n(),i(22,"button",14),l(23,"Iniciar sesi\xF3n"),n(),i(24,"div",15)(25,"a",16),l(26,"No tienes cuenta, crea una"),n(),i(27,"a",17),l(28,"\xBFCambiar tu clave?"),n()()()()),o&2){let m,d,p,g;a(7),c("routerLink",f(11,B)),a(4),c("formGroup",e.form),a(4),v("invalid",((m=e.form.get("email"))==null?null:m.invalid)&&((m=e.form.get("email"))==null?null:m.touched)),a(),c("ngIf",((d=e.form.get("email"))==null?null:d.invalid)&&((d=e.form.get("email"))==null?null:d.touched)),a(4),v("invalid",((p=e.form.get("password"))==null?null:p.invalid)&&((p=e.form.get("password"))==null?null:p.touched)),a(),c("ngIf",((g=e.form.get("password"))==null?null:g.invalid)&&((g=e.form.get("password"))==null?null:g.touched)),a(),c("disabled",e.form.invalid),a(3),c("routerLink",f(12,j)),a(2),c("routerLink",f(13,q))}},dependencies:[N,T,E,F,R,V,G,w,O,M,I],styles:["body[_ngcontent-%COMP%]{background-color:#121212;color:#eee;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;margin:0;padding:0;display:flex;justify-content:center;align-items:center;min-height:100vh;flex-direction:column}#botoncitos[_ngcontent-%COMP%]{display:flex;gap:10px}.title[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem;color:#fca311}.google-btn[_ngcontent-%COMP%], .phone-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background-color:#fca311;border:none;color:#121212;padding:.6rem 1.2rem;font-weight:600;border-radius:6px;cursor:pointer;margin-bottom:1rem;font-size:1rem;transition:background-color .3s ease}.google-btn[_ngcontent-%COMP%]:hover{background-color:#e69500}.phone-btn[_ngcontent-%COMP%]{background-color:#fca311}.phone-btn[_ngcontent-%COMP%]:hover{background-color:#e69500}.google-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .phone-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.3rem}.login-form[_ngcontent-%COMP%]{background-color:#1e1e1e;padding:2rem;border-radius:12px;max-width:400px;width:90%;box-shadow:0 0 12px #fca31133}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.4rem;color:#fca311}input[_ngcontent-%COMP%]{width:100%;padding:.45rem .6rem;border:1px solid #444;border-radius:6px;font-size:1rem;background-color:#2a2a2a;color:#fff;transition:border-color .3s ease}input[_ngcontent-%COMP%]:focus{border-color:#fca311;outline:none}input.invalid[_ngcontent-%COMP%]{border-color:#e74c3c}.error[_ngcontent-%COMP%]{color:#e74c3c;font-size:.85rem;margin-top:.3rem}.submit-btn[_ngcontent-%COMP%]{width:100%;background-color:#fca311;color:#121212;font-weight:700;padding:.7rem;border:none;border-radius:6px;font-size:1.1rem;cursor:pointer;transition:background-color .3s ease}.submit-btn[_ngcontent-%COMP%]:hover{background-color:#e69500}.submit-btn[_ngcontent-%COMP%]:disabled{background-color:#555;color:#999;cursor:not-allowed}.links[_ngcontent-%COMP%]{margin-top:1rem;text-align:center;display:flex;justify-content:space-between;font-size:.9rem}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fca311;text-decoration:none;font-weight:600}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.change-link[_ngcontent-%COMP%]{font-style:italic;color:#aaa}"]})};export{x as default};
