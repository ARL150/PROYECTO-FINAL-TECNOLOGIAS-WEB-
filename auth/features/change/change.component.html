<h1>Cambiar clave</h1>

<form [formGroup]="form" (ngSubmit)="submit()" novalidate>

  <!-- Email -->
  <label for="email">Correo electrónico:</label>
  <input id="email" type="email" formControlName="email" required />
  @if (form.get('email')?.invalid && form.get('email')?.touched) {
    <div>
      @if (form.get('email')?.errors?.['required']) {
        <small>El correo es obligatorio.</small>
      }
      @if (form.get('email')?.errors?.['email']) {
        <small>El correo no es válido.</small>
      }
    </div>
  }

  <!-- Contraseña actual -->
  <label for="password">Contraseña actual:</label>
  <input id="password" type="password" formControlName="password" required minlength="6" />
  @if (form.get('password')?.invalid && form.get('password')?.touched) {
    <div>
      @if (form.get('password')?.errors?.['required']) {
        <small>La contraseña es obligatoria.</small>
      }
      @if (form.get('password')?.errors?.['minlength']) {
        <small>Mínimo 6 caracteres.</small>
      }
    </div>
  }

  <!-- Nueva contraseña -->
  <label for="newPassword">Nueva contraseña:</label>
  <input id="newPassword" type="password" [formControl]="newPasswordControl" required minlength="6" />
  @if (newPasswordControl.invalid && newPasswordControl.touched) {
    <div>
      @if (newPasswordControl.errors?.['required']) {
        <small>La nueva contraseña es obligatoria.</small>
      }
      @if (newPasswordControl.errors?.['minlength']) {
        <small>Mínimo 6 caracteres.</small>
      }
    </div>
  }

  <!-- Confirmar nueva contraseña -->
  <label for="confirmPassword">Confirmar nueva contraseña:</label>
  <input id="confirmPassword" type="password" [formControl]="confirmPasswordControl" required />
  @if (confirmPasswordControl.touched && confirmPasswordControl.value !== newPasswordControl.value) {
    <div>
      <small>Las contraseñas no coinciden.</small>
    </div>
  }

  <button type="submit"
    [disabled]="form.invalid || newPasswordControl.invalid || confirmPasswordControl.value !== newPasswordControl.value">
    Cambiar contraseña
  </button>

</form>
